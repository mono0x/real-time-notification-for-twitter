<!DOCTYPE HTML>
<!--
 * Copyright (c) 2011 mono
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
-->
<html>
  <head>
    <meta charset="UTF-8" />
    <title>TwitterRealtimeNotification</title>
    <style type="text/css">
      * {
        margin: 0;
        padding: 0;
      }
      a {
        color: black;
        background-color: white;
        text-decoration: none;
      }
      a:hover {
        text-decoration: underline;
      }
      #notification {
        position: relative;

        width: 300px;
        min-height: 56px;
      }
      #main {
        width: 236px;

        margin-left: 56px;
        padding: 4px;
      }
      #icon {
        position: absolute;

        width: 48px;
        height: 48px;

        left: 4px;
        top: 4px;

      }
      h1 {
        font-size: 14px;
        font-weight: bold;
      }
      p {
        font-size: 12px;
        font-weight: normal;
      }
    </style>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        var background = chrome.extension.getBackgroundPage();
        var queue = background.notificationQueue;
        if(queue.length == 0) {
          window.close();
        }
        var item = queue.shift();
        var title = document.getElementById('title');
        var icon = document.getElementById('icon');
        var content = document.getElementById('content');
        title.textContent = item.title;
        title.href = item.href;
        icon.src = item.iconUrl;
        content.textContent = item.content;
        title.addEventListener('click', function() {
          chrome.tabs.create({
            url: title.href
          });
          window.close();
          return false;
        }, false);
      }, false);
    </script>
  </head>
  <body>
    <div id="notification">
      <div id="main">
        <h1><a id="title"></a></h1>
        <p id="content"></p>
      </div>
      <img id="icon" />
    </div>
  </body>
</html>
