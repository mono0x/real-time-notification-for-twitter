<!DOCTYPE HTML>
<!--
 * Copyright (c) 2011 mono
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
-->
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Options | TwitterRealtimeNotification</title>
    <style type="text/css">
      ul {
        list-style-type: none;
      }
    </style>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-5224843-8']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="jquery-1.6.1.min.js"></script>
    <script type="text/javascript">
      $(function() {
      var background = chrome.extension.getBackgroundPage();

      (function() {

      var options = background.load();

      $('#events_mention_enabled').attr('checked', options.events.mention.enabled);
      $('#events_mention_matchInReplyTo').attr('checked', options.events.mention.matchInReplyTo);
      $('#events_directMessage_enabled').attr('checked', options.events.directMessage.enabled);
      $('#events_retweet_enabled').attr('checked', options.events.retweet.enabled);
      $('#events_favorite_enabled').attr('checked', options.events.favorite.enabled);
      $('#events_unfavorite_enabled').attr('checked', options.events.unfavorite.enabled);
      $('#events_follow_enabled').attr('checked', options.events.follow.enabled);

      })();

      var setMessage = function(name) {
        $('.' + name).text(chrome.i18n.getMessage(name));
      };

      setMessage('options_options');
      setMessage('options_events');
      setMessage('options_events_mention');
      setMessage('options_events_mention_matchInReplyTo');
      setMessage('options_events_mention_matchInReplyTo_help');
      setMessage('options_events_directMessage');
      setMessage('options_events_retweet');
      setMessage('options_events_favorite');
      setMessage('options_events_unfavorite');
      setMessage('options_events_follow');
      $('input[type="submit"]').val(chrome.i18n.getMessage('options_save'));

      $('form').submit(function() {
        background.save({
          version: 1,
          events: {
            mention: {
              enabled: $('#events_mention_enabled').is(':checked'),
              matchInReplyTo: $('#events_mention_matchInReplyTo').is(':checked')
            },
            directMessage: {
              enabled: $('#events_directMessage_enabled').is(':checked')
            },
            retweet: {
              enabled: $('#events_retweet_enabled').is(':checked')
            },
            favorite: {
              enabled: $('#events_favorite_enabled').is(':checked')
            },
            unfavorite: {
              enabled: $('#events_unfavorite_enabled').is(':checked')
            },
            follow: {
              enabled: $('#events_follow_enabled').is(':checked')
            }
          }
        });
        return false;
      });

      });
    </script>
  </head>
  <body>
    <h1 class="options_options"></h1>
    <form>
      <p class="options_events"></p>
      <ul>
        <li>
          <label>
            <input id="events_mention_enabled" type="checkbox" value="true" />
            <span class="options_events_mention" />
          </label>
          <ul>
            <li>
              <label>
                <input id="events_mention_matchInReplyTo" type="checkbox" value="true" />
                <span class="options_events_mention_matchInReplyTo" />
              </label>
              <span class="options_events_mention_matchInReplyTo_help" />
            </li>
          </ul>
        </li>
        <li>
          <label>
            <input id="events_directMessage_enabled" type="checkbox" value="true" />
            <span class="options_events_directMessage" />
          </label>
        </li>
        <li>
          <label>
            <input id="events_retweet_enabled" type="checkbox" value="true" />
            <span class="options_events_retweet" />
          </label>
        </li>
        <li>
          <label>
            <input id="events_favorite_enabled" type="checkbox" value="true" />
            <span class="options_events_favorite" />
          </label>
        </li>
        <li>
          <label>
            <input id="events_unfavorite_enabled" type="checkbox" value="true" />
            <span class="options_events_unfavorite" />
          </label>
        </li>
        <li>
          <label>
            <input id="events_follow_enabled" type="checkbox" value="true" />
            <span class="options_events_follow" />
          </label>
        </li>
      </ul>
      <input type="submit" value="" />
    </form>
  </body>
</html>
